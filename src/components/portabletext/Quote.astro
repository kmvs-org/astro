---
import { sanityUrl } from '../../../sanity/image'
const { color, title, quote, author } = Astro.props.node || Astro.props
---

<div class='quote full-width'>
	<svg
		class='divider'
		preserveAspectRatio='none'
		xmlns='http://www.w3.org/2000/svg'
		viewBox='0 0 596.5 21'>
		<path
			d='M0,19.5V0h596.5v21c-1-.02-2,.02-2.99-.08-13.81-1.44-27.61-3.02-41.43-4.34-14.07-1.34-28.16-2.45-42.24-3.61-14.16-1.17-28.33-2.37-42.5-3.4-13.18-.95-26.37-1.75-39.57-2.51-12.78-.74-25.56-1.42-38.35-2.01-12.88-.59-25.76-1.08-38.64-1.51-12.22-.41-24.45-.74-36.67-1-11.65-.25-23.3-.49-34.95-.48-13.65,0-27.3.23-40.95.45-17.06.28-34.11.61-51.17,1.01-10.89.25-21.78.65-32.67,1.03-3.66.13-7.31.33-10.96.57-9.2.61-18.41,1.26-27.61,1.89-7.63.53-15.27.94-22.88,1.62-11.18,1.01-22.34,2.15-33.5,3.37-10.91,1.19-21.82,2.47-32.71,3.84-8.91,1.12-17.81,2.43-26.71,3.66Z'
		></path>
	</svg>
	<div class='container'>
		<p class='title' style={`color: var(--${color});`}>{title}</p>
		<p class='text'>{quote}</p>
		<div class='author'>
			<div class='image'>
				{
					author.image && (
						<img
							src={sanityUrl(author.image)
								.auto('format')
								.size(300, 300)
								.url()}
							alt={author.name}
						/>
					)
				}
			</div>
			<div class='info'>
				<p class='name'>{author.name}</p>
				{
					author.description && (
						<p class='description'>{author.description}</p>
					)
				}
			</div>
		</div>
	</div>
</div>

<style lang='less'>
	@import '../../styles/variables.less';

	.quote {
		background-color: #ebebeb;
		margin-top: 75px;
		margin-bottom: 50px;
		padding-top: 75px;
		padding-bottom: 50px;
		position: relative;

		.divider {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			@media @s-d {
				height: 60px;
			}

			@media @s-nd {
				height: 30px;
			}

			path {
				fill: var(--bgC1);
			}
		}

		@media @s-d {
			background-image: url('/images/mic.png');
			background-position: -20px 80px;
			background-repeat: no-repeat;
			background-size: 9vw auto;
		}

		@media @s-d {
			.container {
				padding-left: 100px;
				padding-right: 100px;
			}
		}

		.title {
			font-weight: 600;

			@media @s-nm {
				font-size: 40px;
			}
			@media @s-m {
				font-size: 30px;
			}
		}

		.text {
			font-size: 1.2em;
		}

		.author {
			display: grid;
			align-items: center;
			justify-content: end;
			margin-top: 25px;

			@media @s-nm {
				grid-template-columns: auto minmax(180px, 500px);
			}

			.image {
				margin-right: 20px;
				padding-right: 20px;
				border-right: 1px solid var(--bdC1);

				img {
					border-radius: 50%;
					width: 100%;
					max-width: 100px;
					display: block;
				}
			}

			.info {
				.name {
					font-size: 1.2em;
					font-weight: 600;
					margin-bottom: 0;
				}

				.description {
					font-size: 1em;
					font-weight: 300;
				}
			}
		}
	}
</style>
